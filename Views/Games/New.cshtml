@model Bazaar.Domain.ViewModel.GameFormViewModel

@{
    ViewBag.Title = "New";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}


<div class="jumbotron">
    <h1>Add new game</h1>
    <p>Just add new game...</p>
</div>

@using (Html.BeginForm("Create", "Games"))
{


    <div class="form-group">
        @Html.LabelFor(m => m.Name)
        @Html.TextBoxFor(m => m.Name, new { @class = "form-control col" })
        @Html.ValidationMessageFor(m => m.Name)
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Description)
        @Html.TextAreaFor(m => m.Description, new { @class = "form-control col", @rows = "5" })
        @Html.ValidationMessageFor(m => m.Description)
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Price)
        @Html.TextBoxFor(m => m.Price, new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.Price)
    </div>


    <!-- Trigger the modal with a button -->


    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Выберите жанр</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <ul class="list-group">

                        @foreach (var item in Model.Genres)
                        {
                            <a class="ganreitem list-group-item" value="@item.Id">@item.Name</a>
                        }

                    </ul>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Закрыть</button>
                </div>

            </div>
        </div>
    </div>



    <!-- <div class="form-group">



         @Html.LabelFor(m => m.Genres)
         @Html.DropDownListFor(m => m.Genres, new SelectList(Model.Genres, "Id", "Name"), "", new { @class = "form-control" })
         @Html.ValidationMessageFor(m => m.Genres)
     </div>

      <input type="text" name="Game.Genres[0].Id" value="1" />
     <input type="text" name="Game.Genres[0].Name" value="NAme" />-->


    <div class="form-group">
        @Html.LabelFor(m => m.Publisher)
        @Html.TextBoxFor(m => m.Publisher, new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.Publisher)
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Developer)
        @Html.TextBoxFor(m => m.Developer, new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.Developer)
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Language)
        @Html.TextBoxFor(m => m.Language, new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.Language)
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Modes)
        @Html.DropDownListFor(m => m.Modes, new SelectList(Model.Modes, "Id", "Name"), "", new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.Modes)
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Platforms)
        @Html.DropDownListFor(m => m.Platforms, new SelectList(Model.Platforms, "Id", "Name"), "", new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.Platforms)
    </div>



    <div class="form-group">
        @Html.LabelFor(m => m.DateAdded)
        @Html.TextBoxFor(m => m.DateAdded, "{0:dd/mm/yy}", new { @class = "form-control datepicker" })
    </div>


    <div class="form-group">
        
        <button type="button" class="btn btn-primary btn-icon" data-toggle="modal" data-target="#myModal">
            <span class="icon"><i class="fas fa-plus"></i></span>Добавить жанр
        </button>
        <div class="ganrelist"></div>
    </div>



    <div class="form-group">
        <button type="submit" class="btn btn-primary">Save</button>
    </div>

   
}

@section scripts
{
    <script>
        $(document).ready(function () {

            $("input[name='DateAdded']").datepicker({
                dateFormat: "dd/M/yy",
                changeMonth: true,
                changeYear: true,
                yearRange: "-60:+0",
                dateFormat: "dd.mm.yy",
                monthNames: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],
                dayNamesMin: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб']
            });



            $('html').on('click', '.ganreitem', function () {
                var id = $(this).attr("value");
                var name = $(this).text();
                $(".ganrelist").append("<div class='cont'><input readonly='readonly' class='form-control' type ='text' name = 'Game.Genres[0].Id' value = '" + name + "' /> <span class='remove btn  btn-danger'><i class='fas fa-minus'></i></span></div>");

                $(this).remove();

            });


            $('html').on('click', '.remove', function () {
                $(this).parent().remove();
            });

        });
    </script>
}